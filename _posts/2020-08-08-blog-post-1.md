---
title: 'Using the Correct Lagrangian for the Inverted Pendulum'
date: 2020-08-09
permalink: /posts/2020/08/blog-post-1/
mathjax: true
tags:
  - lagrangian
  - double pendulum

---

The Lagrangian and the Inverted Pendulum
===

The inverted pendulum is a canonical system studied extensively in control theory because it has a simple goal -- keep a pendulum upright by moving its base left to right -- but the equations of motion are nonlinear, making it a good test application for novel controllers. These nonlinear equations are found through two methods: application of Newton's second law, and Lagrange's method. This post will focus on the latter, and how to use Lagrange's method correctly to get the equations of motion for the inverted pendulum.

A quick google search for the equations of the motion for the inverted pendulum gives many different results that look similar, but have different notions and assumptions on the system. Quickly applying any one of these might be good enough for your application, but how do you know for sure your Lagranian is correct? The only way to find out is to derive it from scratch, which we will do right now.

What is a Lagrangian?
===

The Lagrangian is a function that mixes together the kinetic and potential energy functions of a system in a special way. It is studied extensively in Lagrangian mechanics, which is taught in many undergraduate and graduate physics courses. In most applications, the Lagrangian $L$ is posed as the kinetic energy $T$ of the system minus the potential energy $V$:

\begin{equation}
L = T - V
\end{equation}

As is known by most scientists and engineers, the kinetic energy is usually a function of velocity $\dot{x}$, and the potential energy is usually a funciton of position $x$. So the variables of the Lagrangian can be explicitly stated as:

\begin{equation}
L(x,\dot{x}) = T - V
\end{equation}

In order to analyze any system, both $T$ and $V$ need to be defined. Let's look at the inverted pendulum system to do so.

The Inverted Pendulum System
===

For simplicity, we denote things like angle orientaion and masses according to the [wikipedia entry on the inverted pendulum](https://en.wikipedia.org/wiki/Inverted_pendulum#:~:text=An%20inverted%20pendulum%20is%20a,additional%20help%20will%20fall%20over.). Here is a picture of the system:

![Inverted Pendulum System](/images/blog_pics/IP1/ip_system.png)

A force $F$ pushes a cart of mass $M$ left to right, while an inverted pendulum of mass $m$ is left to swing freely about a point fixed on the cart. While this model makes assumptions that are reasonable for many systems (e.g. no frictional forces), there is one assumption that might not be so reasonable: the pendulum is treated as a point mass.

The inspiration for this blog post really came when I asked the question: "what if we didn't make this assumption?" One simple answer is that we can _always_ make this assumption, since we can replace any physical pendulum with a point mass located at the pendulum's center of mass. The problem is that this answer is wrong, and to see why, consider the following. Suppose we had a rod whose mass was almost all concentrated at its end. In this case, simplifying all mass to a point at the end makes sense:

![Moment of Inertia 1](/images/blog_pics/IP1/moment_of_inertia1.png)

The moment of inertia for this system is simple: $I_1 = mL^2$. Thus, if rotating at angular speed $\omega$, this system would then have rotational kinetic energy $T_1 = mL^2\omega/2$.

Now, cut the mass in half and place on half at the pivot, and one half a distance $2L$ from the pivot:

![Moment of Inertia 2](/images/blog_pics/IP1/moment_of_inertia2.png)

The moment of inertia for this system is now $I_2 = (m/2)(2L)^2 = 2mL^2$. Even though the center of mass is the same, the moment of inertia has doubled! The immediate consequence is that the rotational energies between the two system would be different if they have the same rotational speed $\omega$. Thus, we can't simply replace the physical pendulum with a point mass in any situation when rotations are concerned.

This is why it can be confusing when using Lagrangian mechanics on system that rotate. How should we proceed?

Calculating Kinetic and Potential Energy
===

